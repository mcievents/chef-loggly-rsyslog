# This file is generated by Chef.
# Do not modify.

<%- if @monitor_files %>

  <% node['loggly']['log_files'].each do |logfile| %>
$InputFileName <%= logfile['filename'] %>
$InputFileTag <%= logfile['tag'] %>:
$InputFileStateFile <%= logfile['statefile'] %>
$InputRunFileMonitor

  <%- end %>

$InputFilePollInterval <%= node['loggly']['rsyslog']['input_file_poll_interval'] %>
<%- end %>

$template LogglyFormat,"<%%pri%>%protocol-version% %timestamp:::date-rfc3339% %HOSTNAME% %app-name% %procid% %msgid% [<%= @token %>@41058 <%= @tags %>] %msg%\n"

<%- if node['loggly']['tls']['enabled'] %>
$DefaultNetstreamDriverCAFile <%= node['loggly']['tls']['cert_path'] %>/loggly-bundle.pem
$ActionSendStreamDriver gtls
$ActionSendStreamDriverMode 1
$ActionSendStreamDriverAuthMode x509/name
$ActionSendStreamDriverPermittedPeer *.loggly.com
<%- end %>

*.* @@<%= node['loggly']['rsyslog']['host'] %>:<%= node['loggly']['rsyslog']['port'] %>;LogglyFormat
